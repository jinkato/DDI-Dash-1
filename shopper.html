<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1300, initial-scale=1.0">
    <title>Shopper Analysis - CarGurus Dealer Analysis</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/global/main.css">
    <link rel="stylesheet" href="styles/global/typography.css">
    <link rel="stylesheet" href="styles/global/link.css">
    <link rel="stylesheet" href="styles/global/button.css">
    <link rel="stylesheet" href="styles/global/panel.css">
    <link rel="stylesheet" href="styles/global/global.css">
    <link rel="stylesheet" href="styles/global/ai.css">
    <link rel="stylesheet" href="styles/global/sidebar.css">
    <link rel="stylesheet" href="styles/market.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <img src="img/logo.svg" alt="CarGurus" style="height: 19px;">
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <!-- Dashboard -->
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="chart-bar" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M424 352h16c4.4 0 8-3.6 8-8V104c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v240c0 4.4 3.6 8 8 8zm-96 0h16c4.4 0 8-3.6 8-8V200c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm-192 0h16c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm96 0h16c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v208c0 4.4 3.6 8 8 8zm272 64H32V72c0-4.42-3.58-8-8-8H8c-4.42 0-8 3.58-8 8v360c0 8.84 7.16 16 16 16h488c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8z"></path>
                            </svg>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>
                    
                    <!-- Pricing (parent) -->
                    <li class="nav-item nav-item-parent expanded">
                        <a href="#" class="nav-link nav-parent">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="tag" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.745 18.745 49.137 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zm-22.627 45.255L271.196 475.314c-6.243 6.243-16.375 6.253-22.627 0L36.686 263.431A15.895 15.895 0 0 1 32 252.117V48c0-8.822 7.178-16 16-16h204.118c4.274 0 8.292 1.664 11.314 4.686l211.882 211.882c6.238 6.239 6.238 16.39 0 22.628zM144 124c11.028 0 20 8.972 20 20s-8.972 20-20 20-20-8.972-20-20 8.972-20 20-20m0-28c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path>
                            </svg>
                            <span class="nav-text">Pricing</span>
                        </a>
                        <ul class="nav-submenu">
                            <li class="nav-subitem">
                                <a href="performance.html" class="nav-sublink">
                                    <span class="nav-subtext">PriceVantage</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="merchandising.html" class="nav-sublink">
                                    <span class="nav-subtext">Merchandising Health</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="inventory.html" class="nav-sublink">
                                    <span class="nav-subtext">View Inventory</span>
                                    <svg class="external-link-icon" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                                        <path d="M10 10H2V2h3V0H2C0.9 0 0 0.9 0 2v8c0 1.1 0.9 2 2 2h8c1.1 0 2-0.9 2-2V7h-2v3zM6 0v2h2.59L4.29 6.29l1.42 1.42L10 3.41V6h2V0H6z"/>
                                    </svg>
                                </a>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- Analysis (parent) -->
                    <li class="nav-item nav-item-parent expanded">
                        <a href="#" class="nav-link nav-parent">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="chart-line" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M500 416h-16V112c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v304h-96V192c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v224h-96V304c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v112H12c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h488c6.627 0 12-5.373 12-12v-8c0-6.627-5.373-12-12-12zm-308 0v-96h64v96h-64zm160 0V208h64v208h-64zm160 0V128h64v288h-64z"></path>
                            </svg>
                            <span class="nav-text">Analysis</span>
                        </a>
                        <ul class="nav-submenu">
                            <li class="nav-subitem">
                                <a href="performance.html" class="nav-sublink">
                                    <span class="nav-subtext">Performance</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="market.html" class="nav-sublink">
                                    <span class="nav-subtext">Market Trends</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="shopper.html" class="nav-sublink active">
                                    <span class="nav-subtext">Shopper</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="market.html" class="nav-sublink">
                                    <span class="nav-subtext">Market Analysis</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- Leads (parent) -->
                    <li class="nav-item nav-item-parent expanded">
                        <a href="#" class="nav-link nav-parent">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="comment-alt-lines" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 7.1 5.8 12 12 12 2.4 0 4.9-.7 7.1-2.4L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm32 352c0 17.6-14.4 32-32 32H293.3l-8.5 6.4L192 460v-76H64c-17.6 0-32-14.4-32-32V64c0-17.6 14.4-32 32-32h384c17.6 0 32 14.4 32 32v288zM280 240H136c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h144c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm96-96H136c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8z"></path>
                            </svg>
                            <span class="nav-text">Leads</span>
                        </a>
                        <ul class="nav-submenu">
                            <li class="nav-subitem">
                                <a href="leads.html" class="nav-sublink">
                                    <span class="nav-subtext">Leads</span>
                                </a>
                            </li>
                            <li class="nav-subitem">
                                <a href="why.html" class="nav-sublink">
                                    <span class="nav-subtext">Why</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- IMV Lookup -->
                    <li class="nav-item">
                        <a href="imv.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="calculator" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="currentColor" d="M80 448h288c8.84 0 16-7.16 16-16V240c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v192c0 8.84 7.16 16 16 16zm208-96v-96h64v160h-64v-64zm-96-96h64v64h-64v-64zm0 96h64v64h-64v-64zm-96-96h64v64H96v-64zm0 96h64v64H96v-64zM400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zm16 464c0 7.93-8.07 16-16 16H48c-7.93 0-16-8.07-16-16V192h384v272zm0-304H32V48c0-7.93 8.07-16 16-16h352c7.93 0 16 8.07 16 16v112z"></path>
                            </svg>
                            <span class="nav-text">IMV Lookup</span>
                        </a>
                    </li>
                    
                    <!-- Sell My Car -->
                    <li class="nav-item">
                        <a href="sellmycar.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="receipt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="currentColor" d="M344 240H104c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H104c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM418.1 0c-5.8 0-11.8 1.8-17.3 5.7L357.3 37 318.7 9.2c-8.4-6-18.2-9.1-28.1-9.1-9.8 0-19.6 3-28 9.1L224 37 185.4 9.2C177 3.2 167.1.1 157.3.1s-19.6 3-28 9.1L90.7 37 47.2 5.7C41.8 1.8 35.8 0 29.9 0 14.4.1 0 12.3 0 29.9v452.3C0 499.5 14.3 512 29.9 512c5.8 0 11.8-1.8 17.3-5.7L90.7 475l38.6 27.8c8.4 6 18.2 9.1 28.1 9.1 9.8 0 19.6-3 28-9.1L224 475l38.6 27.8c8.4 6 18.3 9.1 28.1 9.1s19.6-3 28-9.1l38.6-27.8 43.5 31.3c5.4 3.9 11.4 5.7 17.3 5.7 15.5 0 29.8-12.2 29.8-29.8V29.9C448 12.5 433.7 0 418.1 0zM416 477.8L376 449l-18.7-13.5-18.7 13.5-38.6 27.8c-2.8 2-6 3-9.3 3-3.4 0-6.6-1.1-9.4-3.1L242.7 449 224 435.5 205.3 449l-38.6 27.8c-2.8 2-6 3-9.4 3-3.4 0-6.6-1.1-9.4-3.1L109.3 449l-18.7-13.5L72 449l-40 29.4V34.2L72 63l18.7 13.5L109.4 63 148 35.2c2.8-2 6-3 9.3-3 3.4 0 6.6 1.1 9.4 3.1L205.3 63 224 76.5 242.7 63l38.6-27.8c2.8-2 6-3 9.4-3 3.4 0 6.6 1.1 9.4 3.1L338.7 63l18.7 13.5L376 63l40-28.8v443.6zM344 144H104c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8z"></path>
                            </svg>
                            <span class="nav-text">Sell My Car</span>
                        </a>
                    </li>
                    
                    <!-- Advertising -->
                    <li class="nav-item">
                        <a href="advertising.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="megaphone" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                <path fill="currentColor" d="M568 32h-16c-4.42 0-8 3.58-8 8v19.33L32 179.8V168c0-4.42-3.58-8-8-8H8c-4.42 0-8 3.58-8 8v176c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-11.8l130.58 30.72c-1.56 6.8-2.58 13.8-2.58 21.07 0 53.02 42.98 96 96 96 45.13 0 82.45-31.3 92.64-73.29L544 452.67V472c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8V40c0-4.42-3.58-8-8-8zM256 448c-35.29 0-64-28.71-64-64 0-4.75.72-9.31 1.76-13.74l124.13 29.21C310.92 427.27 285.93 448 256 448zM32 299.33v-86.66L544 92.2v327.6L32 299.33z"></path>
                            </svg>
                            <span class="nav-text">Advertising</span>
                        </a>
                    </li>
                    
                    <!-- Digital Deal -->
                    <li class="nav-item">
                        <a href="digitaldeal.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="file-contract" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                <path fill="currentColor" d="M369.9 97.98L286.02 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h288.02c26.49 0 47.99-21.5 47.99-47.99V131.97c0-12.69-5.1-24.99-14.1-33.99zM256.03 32.59c2.8.7 5.3 2.1 7.4 4.2l83.88 83.88c2.1 2.1 3.5 4.6 4.2 7.4h-95.48V32.59zM352 464.01c0 8.8-7.2 16-16 16H47.99c-8.8 0-16-7.2-16-16V48.09c0-8.8 7.2-16.09 16-16.09h176.04v104.07c0 13.3 10.7 23.93 24 23.93H352v304.01zM208 216c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v88c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-88zm-96 0c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v88c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-88zm170.82 118.79c8.65-3.06 14.18-11.26 14.18-19.79 0-11.89-9.65-22-21.38-22-12.01 0-21.62 10.16-21.62 22 0 8.59 5.58 16.73 14.18 19.79L253.79 367H149.23c14.04-20.1 27.77-41.52 27.77-67 0-27.7-16.56-52.81-41.85-66.46C160.77 219.77 176 191.26 176 160c0-44.18-28.65-80-64-80s-64 35.82-64 80c0 31.26 15.23 59.77 40.85 73.54C63.56 247.19 47 272.3 47 300c0 45.67 44.18 71.03 49.61 74.13C99.13 375.54 104.14 384 112 384h160c8.8 0 16-7.2 16-16v-16c0-7.16-4.62-13.29-11.03-15.55l-4.15-17.66zM80 160c0-26.47 14.33-48 32-48s32 21.53 32 48-14.33 48-32 48-32-21.53-32-48zm32 176c-18.64 0-33-20.25-33-36 0-15.87 14.36-36 33-36s33 20.13 33 36c0 15.75-14.36 36-33 36z"></path>
                            </svg>
                            <span class="nav-text">Digital Deal</span>
                        </a>
                    </li>
                    
                    <!-- Listings -->
                    <li class="nav-item">
                        <a href="listings.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="car" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M120.81 248c-25.96 0-44.8 16.8-44.8 39.95 0 23.15 18.84 39.95 44.8 39.95l10.14.1c39.21 0 45.06-20.1 45.06-32.08-.01-24.68-31.1-47.92-55.2-47.92zm10.14 56c-3.51 0-7.02-.1-10.14-.1-12.48 0-20.8-6.38-20.8-15.95s8.32-15.95 20.8-15.95 31.2 14.36 31.2 23.93c0 7.17-10.54 8.07-21.06 8.07zm260.24-56c-24.1 0-55.19 23.24-55.19 47.93 0 11.98 5.85 32.08 45.06 32.08l10.14-.1c25.96 0 44.8-16.8 44.8-39.95-.01-23.16-18.85-39.96-44.81-39.96zm0 55.9c-3.12 0-6.63.1-10.14.1-10.53 0-21.06-.9-21.06-8.07 0-9.57 18.72-23.93 31.2-23.93s20.8 6.38 20.8 15.95-8.32 15.95-20.8 15.95zm114.8-140.94c-7.34-11.88-20.06-18.97-34.03-18.97H422.3l-8.07-24.76C403.5 86.29 372.8 64 338.17 64H173.83c-34.64 0-65.33 22.29-76.06 55.22l-8.07 24.76H40.04c-13.97 0-26.69 7.09-34.03 18.97s-8 26.42-1.75 38.91l5.78 11.61c3.96 7.88 9.92 14.09 17 18.55-6.91 11.74-11.03 25.32-11.03 39.97V400c0 26.47 21.53 48 48 48h16c26.47 0 48-21.53 48-48v-16H384v16c0 26.47 21.53 48 48 48h16c26.47 0 48-21.53 48-48V271.99c0-14.66-4.12-28.23-11.03-39.98 7.09-4.46 13.04-10.68 17-18.57l5.78-11.56c6.24-12.5 5.58-27.05-1.76-38.92zM128.2 129.14C134.66 109.32 153 96 173.84 96h164.33c20.84 0 39.18 13.32 45.64 33.13l20.47 62.85H107.73l20.47-62.84zm-89.53 70.02l-5.78-11.59c-1.81-3.59-.34-6.64.34-7.78.87-1.42 2.94-3.8 6.81-3.8h39.24l-6.45 19.82a80.69 80.69 0 0 0-23.01 11.29c-4.71-1-8.94-3.52-11.15-7.94zM96.01 400c0 8.83-7.19 16-16 16h-16c-8.81 0-16-7.17-16-16v-16h48v16zm367.98 0c0 8.83-7.19 16-16 16h-16c-8.81 0-16-7.17-16-16v-16h48v16zm0-80.01v32H48.01v-80c0-26.47 21.53-48 48-48h319.98c26.47 0 48 21.53 48 48v48zm15.12-132.41l-5.78 11.55c-2.21 4.44-6.44 6.97-11.15 7.97-6.94-4.9-14.69-8.76-23.01-11.29l-6.45-19.82h39.24c3.87 0 5.94 2.38 6.81 3.8.69 1.14 2.16 4.18.34 7.79z"></path>
                            </svg>
                            <span class="nav-text">Listings</span>
                        </a>
                    </li>
                    
                    <!-- Scheduled Reports -->
                    <li class="nav-item">
                        <a href="reports.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="clock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-148.9 88.3l-81.2-59c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h14c6.6 0 12 5.4 12 12v146.3l70.5 51.3c5.4 3.9 6.5 11.4 2.6 16.8l-8.2 11.3c-3.9 5.3-11.4 6.5-16.8 2.6z"></path>
                            </svg>
                            <span class="nav-text">Scheduled Reports</span>
                        </a>
                    </li>
                    
                    <!-- Manage Account -->
                    <li class="nav-item">
                        <a href="account.html" class="nav-link">
                            <svg class="nav-icon" aria-hidden="true" focusable="false" data-prefix="fal" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M482.696 299.276l-32.61-18.827a195.168 195.168 0 0 0 0-48.899l32.61-18.827c9.576-5.528 14.195-16.902 11.046-27.501-11.214-37.749-31.175-71.728-57.535-99.595-7.634-8.07-19.817-9.836-29.437-4.282l-32.562 18.798a194.125 194.125 0 0 0-42.339-24.48V38.049c0-11.13-7.652-20.804-18.484-23.367-37.644-8.909-77.118-8.91-114.77 0-10.831 2.563-18.484 12.236-18.484 23.367v37.614a194.101 194.101 0 0 0-42.339 24.48L105.23 81.345c-9.621-5.554-21.804-3.788-29.437 4.282-26.36 27.867-46.321 61.847-57.535 99.595-3.149 10.599 1.47 21.972 11.046 27.501l32.61 18.827a195.168 195.168 0 0 0 0 48.899l-32.61 18.827c-9.576 5.528-14.195 16.902-11.046 27.501 11.214 37.748 31.175 71.728 57.535 99.594 7.634 8.07 19.817 9.836 29.437 4.283l32.562-18.798a194.08 194.08 0 0 0 42.339 24.479v37.614c0 11.13 7.652 20.804 18.484 23.367 37.645 8.909 77.118 8.91 114.77 0 10.831-2.563 18.484-12.236 18.484-23.367v-37.614a194.138 194.138 0 0 0 42.339-24.479l32.562 18.798c9.62 5.554 21.803 3.788 29.437-4.283 26.36-27.866 46.321-61.846 57.535-99.594 3.149-10.599-1.47-21.972-11.046-27.501zm-65.479 100.461l-46.309-26.74c-26.988 23.071-36.559 28.876-71.039 41.059v53.479a217.145 217.145 0 0 1-87.738 0v-53.479c-33.621-11.879-43.355-17.395-71.039-41.059l-46.309 26.74c-19.71-22.09-34.689-47.989-43.649-75.958l46.309-26.74c-6.339-35.205-6.339-43.829 0-79.034L51.154 167.266c8.96-27.969 23.939-53.868 43.649-75.958l46.309 26.74c27.377-23.434 37.063-29.065 71.039-41.059V23.51a217.145 217.145 0 0 1 87.738 0v53.479c33.621 11.879 43.355 17.395 71.039 41.059l46.309-26.74c19.71 22.09 34.689 47.989 43.649 75.958l-46.309 26.74c6.339 35.205 6.339 43.829 0 79.034l46.309 26.74c-8.96 27.969-23.939 53.868-43.649 75.958zM256 160c-52.935 0-96 43.065-96 96s43.065 96 96 96 96-43.065 96-96-43.065-96-96-96zm0 160c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z"></path>
                            </svg>
                            <span class="nav-text">Manage Account</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <main class="main-content">
            
            <!-- Main content area -->
            <div class="content">
                <div class="header" style="display: flex; justify-content: space-between; align-items: center;">
                    <h1 class="page-title">Shopper Analysis</h1>
                    <button class="ai-button">Generate summary</button>
                </div>
                
                <!-- AI Summary Panel -->
                <div id="aiSummaryPanel" class="ai-summary-panel">
                    <div class="ai-summary-header">
                        <div class="ai-summary-title">
                            <span>Shopper Analysis Overview</span>
                        </div>
                    </div>
                    <div class="ai-summary-content">
                        <p>Your dealership attracts three distinct shopper personas: Local Value Seekers (45%) who are highly price-sensitive, Distance Travelers (30%) who prioritize features, and Quick Deciders (25%) who need immediate availability. The majority of your shoppers are within a 25-mile radius.</p>
                        
                        <p><strong>Recommendations:</strong></p>
                        <ul>
                            <li>Optimize inventory pricing for competitive deals to attract Local Value Seekers</li>
                            <li>Highlight unique features and specialty vehicles for Distance Travelers</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Shopper Persona Panel - Full Width -->
                <div class="panel" style="margin-bottom: 24px;">
                    <div class="panel-header">
                        <h3 class="panel-title">Shopper persona</h3>
                    </div>
                    <div class="panel-content" style="padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;">
                            <!-- Persona 1 -->
                            <div style="border: 1px solid #E5E7EB; border-radius: 8px; padding: 20px; background: #FAFAFA;">
                                <img src="img/shopper/shopper1.png" alt="Local Value Seeker" style="width: 60px; height: 60px; border-radius: 8px; margin-bottom: 12px;">
                                <h4 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 8px;">Local Value Seeker (45%)</h4>
                                <p class="persona-description">Within 15 miles • $18-28K budget • Filters for Good/Great deals only • 12+ listings viewed • Mobile evenings/weekends • Highly price-sensitive</p>
                            </div>
                            
                            <!-- Persona 2 -->
                            <div style="border: 1px solid #E5E7EB; border-radius: 8px; padding: 20px; background: #FAFAFA;">
                                <img src="img/shopper/shopper2.png" alt="Distance Traveler" style="width: 60px; height: 60px; border-radius: 8px; margin-bottom: 12px;">
                                <h4 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 8px;">Distance Traveler (30%)</h4>
                                <p class="persona-description">50+ miles away • $35-50K budget • Feature-focused, less price-sensitive • 5-7 listings viewed • Desktop during work hours • Compares specialty dealers</p>
                            </div>
                            
                            <!-- Persona 3 -->
                            <div style="border: 1px solid #E5E7EB; border-radius: 8px; padding: 20px; background: #FAFAFA;">
                                <img src="img/shopper/shopper3.png" alt="Quick Decider" style="width: 60px; height: 60px; border-radius: 8px; margin-bottom: 12px;">
                                <h4 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 8px;">Quick Decider (25%)</h4>
                                <p class="persona-description">Within 25 miles • $20-40K budget • 1-2 days research • 3-5 listings viewed • Mobile lunch/ commute • Needs immediate availability</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Top Charts Row -->
                <div class="panels-grid" style="margin-bottom: 24px; grid-auto-rows: auto;">
                    <!-- Chart 1 -->
                    <div class="panel">
                        <div class="panel-header">
                            <h3 class="panel-title">Shopper Age</h3>
                        </div>
                        <div class="panel-content" style="padding: 15px 20px;">
                            <div style="height: 210px; position: relative;">
                                <canvas id="shopperEngagementChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chart 2 -->
                    <div class="panel">
                        <div class="panel-header">
                            <h3 class="panel-title">Gender Distribution</h3>
                        </div>
                        <div class="panel-content" style="padding: 15px 20px;">
                            <div style="height: 210px; position: relative;">
                                <canvas id="conversionRateChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Location Panel - Full Width -->
                <div class="panel" style="margin-bottom: 24px;">
                    <div class="panel-header">
                        <h3 class="panel-title">Location</h3>
                    </div>
                    <div class="panel-content" style="padding: 20px;">
                        <div style="display: flex; gap: 40px;">
                            <div style="flex: 1;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="border-bottom: 1px solid #E5E7EB;">
                                            <th style="text-align: left; padding: 12px 0; font-size: 12px; font-weight: 500; color: #6B7280;">Town/City</th>
                                            <th style="text-align: left; padding: 12px 0; font-size: 12px; font-weight: 500; color: #6B7280;">Total leads</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid #F3F4F6;">
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">Acton, MA</td>
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">802</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #F3F4F6;">
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">Westford, MA</td>
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">802</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #F3F4F6;">
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">Littleton, MA</td>
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">802</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">Groton, MA</td>
                                            <td style="padding: 16px 0; font-size: 14px; color: #111827;">802</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="locationMap" style="flex: 1; border-radius: 8px; min-height: 250px; height: 300px;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Who Converted vs. Who You Lost Panel - Full Width -->
                <div class="panel" style="margin-bottom: 24px;">
                    <div class="panel-header">
                        <h3 class="panel-title">Who Converted vs. Who You Lost</h3>
                        <a href="segment.html" class="learn-more-link">Learn more</a>
                    </div>
                    <div class="panel-content" style="padding: 20px;">
                        <p style="color: #6B7280;">Conversion and loss analytics coming soon...</p>
                    </div>
                </div>
                
            </div>
        </main>
    </div>

    <!-- JavaScript Files -->
    <script src="js/shopper.js"></script>
    
    <!-- AI Summary Toggle Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const generateBtn = document.querySelector('.ai-button');
            const summaryPanel = document.getElementById('aiSummaryPanel');
            
            function showText(element, text, callback) {
                element.textContent = text;
                element.classList.add('show');
                if (callback) {
                    setTimeout(callback, 400); // Wait for fade in to complete
                }
            }
            
            function createChecklistItem(text) {
                const item = document.createElement('div');
                item.className = 'ai-process-item';
                
                const circle = document.createElement('div');
                circle.className = 'ai-check-circle';
                
                // Set duration to 0.4 seconds
                const duration = 0.4;
                circle.style.setProperty('--loader-duration', duration + 's');
                
                // Add SVG for circle loading animation
                const loaderSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                loaderSvg.setAttribute('viewBox', '0 0 18 18');
                const loaderCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                loaderCircle.setAttribute('cx', '9');
                loaderCircle.setAttribute('cy', '9');
                loaderCircle.setAttribute('r', '8.5');
                loaderCircle.setAttribute('fill', 'none');
                loaderSvg.appendChild(loaderCircle);
                circle.appendChild(loaderSvg);
                
                const checkMark = document.createElement('div');
                checkMark.className = 'ai-check-mark';
                checkMark.innerHTML = '<svg viewBox="0 0 14 14" fill="none"><path d="M3 7L6 10L11 4" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
                
                circle.appendChild(checkMark);
                
                const textEl = document.createElement('span');
                textEl.className = 'ai-process-text';
                textEl.textContent = text;
                
                item.appendChild(circle);
                item.appendChild(textEl);
                
                return { item, circle, checkMark, duration: duration };
            }
            
            function animateChecklist(content, callback) {
                const processList = document.createElement('div');
                processList.className = 'ai-process-list';
                
                const steps = [
                    'Analyzing shopper personas',
                    'Evaluating demographics',
                    'Mapping geographic patterns',
                    'Calculating conversion metrics',
                    'Generating recommendations'
                ];
                
                const checklistItems = steps.map(step => createChecklistItem(step));
                checklistItems.forEach(({ item }) => processList.appendChild(item));
                
                content.appendChild(processList);
                
                let currentStep = 0;
                
                function checkNextStep() {
                    if (currentStep < checklistItems.length) {
                        const { item, circle, checkMark, duration } = checklistItems[currentStep];
                        
                        // Show the item
                        setTimeout(() => {
                            item.classList.add('show');
                            
                            // Start circle loading animation after 0.5 second delay
                            setTimeout(() => {
                                circle.classList.add('loading');
                                
                                // After loading animation, fill circle and show checkmark
                                setTimeout(() => {
                                    circle.classList.remove('loading');
                                    item.classList.add('checked');
                                    circle.classList.add('checked');
                                    checkMark.classList.add('show');
                                    
                                    currentStep++;
                                    
                                    // Move to next step or finish
                                    if (currentStep < checklistItems.length) {
                                        setTimeout(checkNextStep, 150);
                                    } else {
                                        // All steps complete, show content
                                        setTimeout(() => {
                                            content.removeChild(processList);
                                            callback();
                                        }, 250);
                                    }
                                }, duration * 1000); // Use dynamic duration for each item
                            }, 500);
                        }, 50);
                    }
                }
                
                // Start the process
                checkNextStep();
            }
            
            generateBtn.addEventListener('click', function() {
                if (!summaryPanel.classList.contains('show')) {
                    // Reset content
                    const content = summaryPanel.querySelector('.ai-summary-content');
                    content.innerHTML = '';
                    
                    // Show panel smoothly
                    summaryPanel.classList.add('show', 'generating');
                    generateBtn.textContent = 'Close';
                    generateBtn.style.setProperty('--ai-icon', 'url("../../img/icon/close.svg")');
                    
                    // Start with checklist animation
                    setTimeout(() => {
                        animateChecklist(content, () => {
                            // Create elements for actual content
                            const p1 = document.createElement('p');
                            const p2 = document.createElement('p');
                            const ul = document.createElement('ul');
                            const li1 = document.createElement('li');
                            const li2 = document.createElement('li');
                            
                            content.appendChild(p1);
                            
                            // Show first paragraph
                            showText(p1, 'Your dealership attracts three distinct shopper personas: Local Value Seekers (45%) who are highly price-sensitive, Distance Travelers (30%) who prioritize features, and Quick Deciders (25%) who need immediate availability. The majority of your shoppers are within a 25-mile radius.', () => {
                                
                                // Recommendations section appears immediately after first paragraph
                                content.appendChild(p2);
                                p2.innerHTML = '<strong>Recommendations:</strong>';
                                p2.classList.add('show');
                                
                                // Add list
                                content.appendChild(ul);
                                ul.classList.add('show');
                                ul.appendChild(li1);
                                ul.appendChild(li2);
                                
                                // Show list items with minimal delay
                                setTimeout(() => {
                                    li1.innerHTML = '<a href="#" style="color: #0D1722; text-decoration: underline;" onclick="return false;">Optimize inventory pricing for competitive deals to attract Local Value Seekers</a>';
                                    li1.classList.add('show');
                                    
                                    setTimeout(() => {
                                        li2.innerHTML = '<a href="#" style="color: #0D1722; text-decoration: underline;" onclick="return false;">Highlight unique features and specialty vehicles for Distance Travelers</a>';
                                        li2.classList.add('show');
                                        setTimeout(() => {
                                            // Stop border animation when content is fully loaded
                                            summaryPanel.classList.remove('generating');
                                        });
                                    }, 100);
                                }, 50);
                            });
                        });
                    }, 300); // Wait for panel to open before showing checklist
                    
                } else {
                    // Hide panel smoothly
                    summaryPanel.classList.remove('show', 'generating');
                    
                    generateBtn.textContent = 'Generate summary';
                    generateBtn.style.setProperty('--ai-icon', 'url("../../img/icon/ai.svg")');
                }
            });
        });
    </script>
    
    <!-- Sidebar Navigation Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle parent navigation clicks
            const parentLinks = document.querySelectorAll('.nav-parent');
            parentLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const parentItem = this.closest('.nav-item-parent');
                    parentItem.classList.toggle('expanded');
                });
            });
        });
    </script>
</body>
</html>
